version: 2

jobs:
    build:
        machine:
            image: ubuntu-2004:202010-01
        steps:
        - checkout
        - run:
            name: Deploy Over SSH
            command: |
                ls -la
    deploy:
        machine:
             image: ubuntu-2004:202010-01
        steps:
        - run:
            name: Deploy Over SSH
            command: |
                ls -la


workflows:
    version: 2
    build-and-deploy:
        jobs:
            - build
            - deploy:
                requires:
                - build # only deploy once build job has completed
                filters:
                    branches:
                        only: main # only deploy on the main branch